\subsection{Is k-cleared-cells NP-hard?}

We prove that k-cleared-cells is NP-hard by constructing a reduction from the \textit{Subset sum} problem. The reduction consists of two parts: one part which considers $K > 1$ in the given \textit{Subset sum} instance, and one part which considers the special case $K = 1$. The first part is more complex and consists of five phases, whereas the second part is relatively straightforward.

The goal of each part is to prove the following: 

\begin{quote}
Given a \textit{Subset sum} instance $Q = \{q_1, \ldots, q_a\}, K \in \mathbb{N}$ there exists a solution $S = \{s_1, \ldots, s_b \} \subseteq Q, \sum S = K$ if and only if there exists a trajectory sequence $\phi$ which clears at least $k$ cells in game $G$ in some instance of \textit{k-cleared-cells}.
\end{quote}

For the general case $K > 1$, we set $k = 8a + 5 \sum Q + 4 + 4K$. For the special case $K = 1$, we set $k = 4$. The block states $P_i$ in $G$ are determined from $Q$ and $K$. This transformation is described in detail in later sections. 
\input{thesis/gameboard.tex}

The following lemma will be used during the whole reduction and explains an important property of the terrain we use in the initial gameboard.\\

\begin{lem}
\label{lem:alternatingrows}
A column with an interval of alternating rows may only clear the top or bottom cell. This is only possible if there is a cell in the column not part of the interval with the same color adjacent to the bottom respectively the top cell.
\end{lem}

\begin{proof}
In \ref{subsub:gameplay} it is defined that for a cell to be marked and cleared its surrounding cells must be the same color. If a column has an interval of alternating rows we know that there are no two adjecent cells with the same color in the column. Therefore the only way a cell part of the interval can be cleared is if it is adjecent to a cell not part of the interval. This leaves only the top and bottom cell.
\end{proof}

\input{thesis/phase1.tex}

\input{thesis/phase2.tex}

\input{thesis/phase3.tex}

\input{thesis/phase4.tex}

\input{thesis/phase5.tex}

\input{thesis/summing.tex}

\input{thesis/special.tex}
